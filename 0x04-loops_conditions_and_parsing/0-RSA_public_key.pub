#!/usr/bin/env bash
# This script generates an SSH RSA key pair, shares the public key in the specified file,
# and updates the SSH public key field in the GitHub intranet profile.

# Generate RSA key pair
ssh-keygen -t rsa -b 4096

# Prompt user for the desired file path to save the key pair
read -p "Enter the file path to save the SSH key pair (press Enter for default): " key_file_path

# Use default path if user doesn't provide one
key_file_path=${key_file_path:-~/.ssh/id_rsa}

# Save the public key in the specified file
public_key_file="$key_file_path.pub"
cat "$public_key_file"

# Display information about the private key location
echo "Private key is saved at: $key_file_path"

# Prompt user to add a passphrase
read -p "Do you want to add a passphrase to your key? (y/n): " add_passphrase

if [ "$add_passphrase" == "y" ]; then
    # Add passphrase
    ssh-keygen -p -f "$key_file_path"
fi

# Prompt user to update the GitHub intranet profile
read -p "Have you updated the SSH public key in your GitHub intranet profile? (y/n): " updated_profile

if [ "$updated_profile" != "y" ]; then
    echo "Please update your GitHub intranet profile with the public key."
fi
